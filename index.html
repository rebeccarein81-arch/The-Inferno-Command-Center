<div class="glass-card">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <div class="card-label">Goal: <span id="goal-target-display">100M</span></div>
        <button onclick="openGoalInput()" style="background:none; border:none; color:#ff4500; cursor:pointer; font-size:0.7rem; font-weight:bold;">[SET GOAL]</button>
    </div>
    
    <div class="card-value" id="goal-percent">0%</div>
    
    <div id="motivation-text" style="color: #888; font-size: 0.75rem; font-style: italic; margin-bottom: 10px; height: 15px;">
        Igniting stats...
    </div>

    <div class="progress-bg">
        <div id="goal-progress-fill" class="progress-fill" style="width: 0%;"></div>
    </div>

    <div id="goal-input-area" style="display:none; margin-top:15px; border-top:1px solid rgba(255,255,255,0.1); padding-top:10px;">
        <p style="font-size: 0.7rem; color: #888; margin-bottom: 5px;">Enter Total Stat Goal (e.g. 100000000):</p>
        <div style="display: flex; gap: 5px;">
            <input type="number" id="new-goal-val" placeholder="e.g. 500000000" style="background:#000; border:1px solid #444; color:white; padding:8px; flex-grow: 1; border-radius:5px;">
            <button onclick="saveGoal()" style="background:#ff4500; border:none; color:white; padding:8px 12px; cursor:pointer; border-radius:5px; font-weight:bold;">SAVE</button>
        </div>
    </div>
</div>

<script>
    // ... previous code (ignite, updateUserIdentity, showSection) ...

    function openGoalInput() { 
        document.getElementById('goal-input-area').style.display = 'block'; 
    }

    function saveGoal() {
        const val = document.getElementById('new-goal-val').value;
        if(val) {
            localStorage.setItem('inferno_user_goal', val);
            document.getElementById('goal-input-area').style.display = 'none';
            updateGoalProgress(localStorage.getItem('inferno_key'));
        }
    }

    async function updateGoalProgress(key) {
        const savedGoal = localStorage.getItem('inferno_user_goal') || 100000000;
        document.getElementById('goal-target-display').innerText = (savedGoal / 1000000).toFixed(0) + "M";

        const response = await fetch(`https://api.torn.com/user/?selections=profile&key=${key}`);
        const data = await response.json();
        
        const totalStats = data.strength + data.speed + data.dexterity + data.defense;
        const percent = Math.min((totalStats / savedGoal) * 100, 100).toFixed(1);

        // Update UI
        document.getElementById('goal-percent').innerText = percent + "%";
        document.getElementById('goal-progress-fill').style.width = percent + "%";
        
        // --- MOTIVATIONAL ALERTS LOGIC ---
        const alertBox = document.getElementById('motivation-text');
        if (percent < 25) {
            alertBox.innerText = "The fire is just starting. Keep training.";
        } else if (percent < 50) {
            alertBox.innerText = "Heat is rising. You're becoming a threat.";
        } else if (percent < 75) {
            alertBox.innerText = "Inferno levels reached. Almost there.";
        } else if (percent < 100) {
            alertBox.innerText = "Finish the job. The target is in sight.";
        } else {
            alertBox.innerText = "GOAL SURPASSED. Set a new target, Commander.";
            alertBox.style.color = "#ff4500";
        }
    }
</script>

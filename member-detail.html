<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>INFERNO | DOSSIER</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Outfit:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --orange: #FF4500; --glow: rgba(255, 69, 0, 0.5); }
        body { background-color: #050505; color: #FFF; font-family: 'Outfit', sans-serif; margin: 0; min-height: 100vh; overflow-x: hidden; position: relative; }
        .smoke-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.2; }
        .smoke { position: absolute; width: 200%; height: 200%; background: url('https://www.transparenttextures.com/patterns/asfalt-dark.png'); filter: blur(40px); animation: drift 60s linear infinite; }
        @keyframes drift { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .nav-header { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border-bottom: 1px solid var(--orange); padding: 20px; display: flex; justify-content: center; gap: 30px; position: sticky; top: 0; z-index: 100; }
        .nav-item { text-decoration: none; color: #888; font-family: 'Orbitron', sans-serif; font-size: 0.85em; }
        .container { padding: 40px; max-width: 900px; margin: auto; text-align: center; }
        h1 { font-family: 'Orbitron', sans-serif; color: var(--orange); text-shadow: 0 0 15px var(--glow); font-size: 2.5em; }
        .history-card { background: rgba(20, 20, 20, 0.8); border: 1px solid rgba(255, 69, 0, 0.3); border-radius: 15px; padding: 30px; margin-top: 30px; backdrop-filter: blur(10px); }
        .weekly-row { display: flex; justify-content: space-between; padding: 15px; border-bottom: 1px solid #333; font-size: 1.2em; }
        .stat-val { color: var(--orange); font-weight: bold; }
        .xanax-val { color: #ffa500; font-size: 0.9em; }
    </style>
</head>
<body>
<div class="smoke-container"><div class="smoke"></div></div>
<nav class="nav-header">
    <a href="index.html" class="nav-item">MAIN HUB</a>
    <a href="stats.html" class="nav-item">INTELLIGENCE</a>
</nav>
<div class="container">
    <h1 id="memberName">MEMBER DOSSIER</h1>
    <div id="historyList" class="history-card">Loading Brain logs...</div>
</div>
<script>
    const params = new URLSearchParams(window.location.search);
    const memberId = params.get('id');
    const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQnplVPLG6flEQ_DCD8ydwGyKlZh2xr6Gkej4RdcajQPJ1M2-CCKZvi_EDn8PKUhvHzNqe2gdgvNr2t/pub?gid=0&single=true&output=csv';

    async function getLogs() {
        const res = await fetch(CSV_URL);
        const text = await res.text();
        const rows = text.split('\n').map(r => r.split(','));
        const logs = rows.filter(r => r[2] == memberId);
        if(logs.length > 0) {
            document.getElementById('memberName').innerText = logs[0][1].toUpperCase() + " | HISTORY";
            let html = "";
            logs.reverse().forEach(log => {
                html += `<div class="weekly-row">
                    <span>${log[0]}</span>
                    <div>
                        <span class="stat-val">${Number(log[3]).toLocaleString()} Stats</span><br>
                        <span class="xanax-val">${log[4]} Xanax Taken</span>
                    </div>
                </div>`;
            });
            document.getElementById('historyList').innerHTML = html;
        }
    }
    getLogs();
</script>
</body>
</html>
